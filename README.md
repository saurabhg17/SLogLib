# SLogLib
SLogLib is easy to use, fully customizable and extensible, cross-platform logging library. The important features of SLogLib are:

* Supports user defined formatting of messages.
* Supports multiple logging devices including console, file, and widgets.
* Supports call stack.

## Getting Started
Following is the minimum code required to start using SLogLib:

~~~c++
#include "SLogLib/SLogLib"
void main()
{
	// Add these lines at the beginning of your program.
	// The devices and formatters are automatically deleted by SLogLib.
	using namespace SLogLib;
	addLoggingDevice(new ConsoleLogger(new NullFormatter)); // LINE 1
	addLoggingDevice(new FileLogger("foo.log", new DetailedFormatter));	 // LINE 2
	
	// The following line writes the message to both console and file.
	int a = 10;
	double b = 15.3;
	const char* c = "Success";
	SLOGLIB_LOG_MSG_INFO("a = " << a << " b = " << b);
	SLOGLIB_LOG_MSG_INFO(c);
}
~~~

The first line adds a console logging device to SLogLib. Logging devices use formatters to format the messages before writing them to the underlying device. Here, a `NullFormatter` is used which does nothing. Output on the console looks like this:
> a = 10 b = 15.3Success

Note that both messages are written to the same line. That's because the `NullFormatter` doesn't add a new line after every message. You can either add new line to each message yourself or pass `AppendNewLine` argument to `NullFormatter's` constructor to automatically add new line after every message.

SLogLib can write a message to multiple logging devices. The second line adds a file logging device and uses a detailed formatter to write the message. Here is the first message written to the file:
> Msg Level  : 1
> Time       : 2015-2-12 17:57:11:151
> Process ID : 4188
> Thread ID  : 7760
> FileName   : LoggingDemo.cpp
> FuncName   : wmain
> Line No.   : 15
> CallStack  : LoggingDemo.cpp : wmain [15]
> Message    : a = 10 b = 15.3

### Few important points
* SLogLib automatically manage devices and formatters, so don't delete them once you pass them to SLogLib.
* Formatters can be assigned to devices only at the time of construction and cannot be changed after that.
* Formatters cannot be shared among devices. Each device must have a unique formatter.
* Logging can be disabled for all devices using `disableLogging()` and be enabled again using `enableLogging()`. Use `isLoggingEnabled()` to check the logging status.
* It is possible to temporarily disable a logging device using `Disable()`. To enable again use `Enable()`.
* An unused device can be deleted by calling removeLoggingDevice().
* Logging can be disabled at the compile time by adding `SLOGLIB_DISABLE_LOGGING` macro to the compiler options.

## Building SLogLib
SLogLib uses cmake (http://www.cmake.org) to generate the files needed by the build tools such as GNU Make, Visual Studio, XCode, etc. If you are new to cmake, you should read Running CMake tutorial (http://www.cmake.org/runningcmake/). You can configure the following variables:

* `SLOGLIB_DEBUG_POSTFIX` (string): The suffix to add to the library name for debug builds (default is d).
* `SLOGLIB_BUILD_EXAMPLES` (bool): Build Examples. Defaults to true.
* `SLOGLIB_BUILD_QT_EXAMPLES` (bool): Build Qt examples. Defaults to false.
* `SLOGLIB_USE_QT_VERSION` (list): Select the Qt version: Qt4 or Qt5. Default is Qt5.

SLogLib has been tested on Windows with Visual Studio 2010 and 2013, on Linux with g++, and on OSX with XCode 6 and g++.

## SLogLib Internals
SLogLib has three main components: a `Message` structure, formatters which convert Messages to  std::strings, and logging devices which write std::strings to the underlying devices. Below is the overall architecture of SLogLib: 

![SLogLib Architecture](/doc/SLogLib-Architecture.jpg)

### Message is the core data
The `Message` structure is the core data which is formatted to a string and written to devices. It has the following fields:

* **mUserMessage**: The message logged by the user.
* **mDateTime**: The local date and the time at which the message was logged. 
* **mLevel**: It is used to categorize messages into various levels. A formatter can use message levels for filtering by formatting only certain types of messages and ignore the rest. For example, you may want to write only the error messages to console but all types of messages to a file. Following message-levels are defined as:
  * `MESSAGE_LEVEL_INFO`
  * `MESSAGE_LEVEL_WARNING`
  * `MESSAGE_LEVEL_ERROR`
  * `MESSAGE_LEVEL_DEBUG`
  * `MESSAGE_LEVEL_DETAIL`
* **mCallstack**: The current call stack. By default, it only contain one entry: the line from which the message was logged from. However, a more complete call stack can generated by adding `SLOGLIB_ADD_TO_CALLSTACK` to all functions which you want to be in the call stack.
* **mProcessID**: The ID of the process which logged the message.
* **mThreadID**: The ID of the thread which logged the message.

The example in the previous section used `SLOGLIB_LOG_MSG_INFO` which sets the message level to eLevel_Info. There is a separate macro for each message level: `SLOGLIB_LOG_MSG_WARN`, `SLOGLIB_LOG_MSG_ERROR`, `SLOGLIB_LOG_MSG_DEBUG`, and `SLOGLIB_LOG_MSG_DETAIL`. There is also a more general macro `SLOGLIB_LOG_MESSAGE` which accepts two parameters: the message level, and the user message.

### Formatters format messages to strings
All formatters are derived from `AbstractFormatter` class. If you wish to write a new formatter you should inherit from `AbstractFormatter` and override `FormatMessage()` function. There are four predefined formatters: `NullFormatter`, `InfoFormatter`, `ErrorFormatter`, and `DetailedFormatter`. `NullFormatter` simply outputs the user message. `InfoFormatter`, `ErrorFormatter`, and `DetailedFormatter` formats only messages which are at or below their messages levels.

### Logging devices write strings to devices
All logging devices inherit from `AbstractLoggingDevice`. SLogLib comes with a `ConsoleLogger` (std::cout) and `FileLogger` (std::ofstream). To create a new logging device simply inherit from the `AbstractLoggingDevice` and override `_WriteMessage()`. For more details see AbstractLoggingDevice.h.

## Authors
Saurabh Garg (saurabhgarg@mysoc.net)

## Bug Reports
Bugs should be reported on GitHub at https://github.com/saurabhg017/SLogLib/issues

## License
SLogLib is release under the MIT License.